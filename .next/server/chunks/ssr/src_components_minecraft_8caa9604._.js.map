{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/minecraft/VoteButton.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState, useTransition } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { ThumbsUp, Loader2 } from 'lucide-react';\nimport { submitVote } from '@/app/actions';\nimport { useToast } from '@/hooks/use-toast';\nimport type { User, BuildingStatus } from '@/types';\n\ninterface VoteButtonProps {\n  buildingId: string;\n  currentUser: User | null;\n  initialVotes: number; \n  buildingStatus: BuildingStatus; // 新增属性\n}\n\nexport default function VoteButton({ buildingId, currentUser, initialVotes, buildingStatus }: VoteButtonProps) {\n  const [isPending, startTransition] = useTransition();\n  const { toast } = useToast();\n\n  const canVote = currentUser && buildingStatus === '有效';\n\n  const handleVote = async () => {\n    if (!currentUser) {\n      toast({\n        title: '请先登录',\n        description: '登录后才能为作品投票。',\n        variant: 'default',\n        duration: 3000,\n      });\n      return;\n    }\n\n    if (buildingStatus !== '有效') {\n      toast({\n        title: '无法投票',\n        description: `此作品当前状态为 \"${buildingStatus}\"，不能进行投票。`,\n        variant: 'destructive',\n        duration: 3000,\n      });\n      return;\n    }\n\n    startTransition(async () => {\n      const result = await submitVote(buildingId);\n      if (result.success) {\n        toast({\n          title: '投票成功！',\n          description: result.message,\n          variant: 'default',\n        });\n      } else {\n        toast({\n          title: '投票失败',\n          description: result.message,\n          variant: 'destructive',\n        });\n      }\n    });\n  };\n\n  return (\n    <Button \n      onClick={handleVote} \n      disabled={isPending || !canVote} \n      variant=\"outline\" \n      className=\"border-accent text-accent hover:bg-accent hover:text-accent-foreground disabled:opacity-60 disabled:cursor-not-allowed disabled:bg-transparent disabled:hover:text-accent disabled:hover:border-accent\"\n      aria-label={`为 ${buildingId} 投票`}\n      title={!canVote && buildingStatus !== '有效' ? `作品状态为 \"${buildingStatus}\"，无法投票` : (!currentUser ? '请登录后投票' : '为作品投票')}\n    >\n      {isPending ? (\n        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\n      ) : (\n        <ThumbsUp className=\"mr-2 h-4 w-4\" />\n      )}\n      {isPending ? '投票中...' : '投票'}\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AACA;AACA;AANA;;;;;;;AAgBe,SAAS,WAAW,EAAE,UAAU,EAAE,WAAW,EAAE,YAAY,EAAE,cAAc,EAAmB;IAC3G,MAAM,CAAC,WAAW,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,gBAAa,AAAD;IACjD,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,UAAU,eAAe,mBAAmB;IAElD,MAAM,aAAa;QACjB,IAAI,CAAC,aAAa;YAChB,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;gBACT,UAAU;YACZ;YACA;QACF;QAEA,IAAI,mBAAmB,MAAM;YAC3B,MAAM;gBACJ,OAAO;gBACP,aAAa,CAAC,UAAU,EAAE,eAAe,SAAS,CAAC;gBACnD,SAAS;gBACT,UAAU;YACZ;YACA;QACF;QAEA,gBAAgB;YACd,MAAM,SAAS,MAAM,CAAA,GAAA,qHAAA,CAAA,aAAU,AAAD,EAAE;YAChC,IAAI,OAAO,OAAO,EAAE;gBAClB,MAAM;oBACJ,OAAO;oBACP,aAAa,OAAO,OAAO;oBAC3B,SAAS;gBACX;YACF,OAAO;gBACL,MAAM;oBACJ,OAAO;oBACP,aAAa,OAAO,OAAO;oBAC3B,SAAS;gBACX;YACF;QACF;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QACL,SAAS;QACT,UAAU,aAAa,CAAC;QACxB,SAAQ;QACR,WAAU;QACV,cAAY,CAAC,EAAE,EAAE,WAAW,GAAG,CAAC;QAChC,OAAO,CAAC,WAAW,mBAAmB,OAAO,CAAC,OAAO,EAAE,eAAe,MAAM,CAAC,GAAI,CAAC,cAAc,WAAW;;YAE1G,0BACC,8OAAC,iNAAA,CAAA,UAAO;gBAAC,WAAU;;;;;qCAEnB,8OAAC,8MAAA,CAAA,WAAQ;gBAAC,WAAU;;;;;;YAErB,YAAY,WAAW;;;;;;;AAG9B","debugId":null}},
    {"offset": {"line": 99, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/minecraft/CopyCommandButton.tsx"],"sourcesContent":["\n'use client';\n\nimport { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { ClipboardCopy, Check } from 'lucide-react';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface CopyCommandButtonProps {\n  commandToCopy: string;\n  buttonText?: string;\n  className?: string;\n  variant?: \"default\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\" | \"destructive\" | null | undefined;\n}\n\nexport default function CopyCommandButton({\n  commandToCopy,\n  buttonText = '复制',\n  className,\n  variant = \"outline\",\n}: CopyCommandButtonProps) {\n  const [copied, setCopied] = useState(false);\n  const { toast } = useToast();\n\n  const handleCopy = async () => {\n    try {\n      await navigator.clipboard.writeText(commandToCopy);\n      setCopied(true);\n      toast({\n        title: '成功',\n        description: '指令已复制到剪贴板！',\n        variant: 'default',\n        duration: 3000,\n      });\n      setTimeout(() => setCopied(false), 2000); // Reset icon/text after 2 seconds\n    } catch (err) {\n      console.error('Failed to copy: ', err);\n      toast({\n        title: '复制失败',\n        description: '无法将指令复制到剪贴板。',\n        variant: 'destructive',\n        duration: 3000,\n      });\n    }\n  };\n\n  return (\n    <Button onClick={handleCopy} variant={variant} size=\"sm\" className={className}>\n      {copied ? (\n        <Check className=\"mr-2 h-4 w-4\" />\n      ) : (\n        <ClipboardCopy className=\"mr-2 h-4 w-4\" />\n      )}\n      {copied ? '已复制' : buttonText}\n    </Button>\n  );\n}\n"],"names":[],"mappings":";;;;AAGA;AACA;AACA;AAAA;AACA;AALA;;;;;;AAce,SAAS,kBAAkB,EACxC,aAAa,EACb,aAAa,IAAI,EACjB,SAAS,EACT,UAAU,SAAS,EACI;IACvB,MAAM,CAAC,QAAQ,UAAU,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IACrC,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,aAAa;QACjB,IAAI;YACF,MAAM,UAAU,SAAS,CAAC,SAAS,CAAC;YACpC,UAAU;YACV,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;gBACT,UAAU;YACZ;YACA,WAAW,IAAM,UAAU,QAAQ,OAAO,kCAAkC;QAC9E,EAAE,OAAO,KAAK;YACZ,QAAQ,KAAK,CAAC,oBAAoB;YAClC,MAAM;gBACJ,OAAO;gBACP,aAAa;gBACb,SAAS;gBACT,UAAU;YACZ;QACF;IACF;IAEA,qBACE,8OAAC,kIAAA,CAAA,SAAM;QAAC,SAAS;QAAY,SAAS;QAAS,MAAK;QAAK,WAAW;;YACjE,uBACC,8OAAC,oMAAA,CAAA,QAAK;gBAAC,WAAU;;;;;qCAEjB,8OAAC,wNAAA,CAAA,gBAAa;gBAAC,WAAU;;;;;;YAE1B,SAAS,QAAQ;;;;;;;AAGxB","debugId":null}}]
}