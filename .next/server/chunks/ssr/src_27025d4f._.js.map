{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/badge.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  \"inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground hover:bg-primary/80\",\n        secondary:\n          \"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80\",\n        outline: \"text-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  )\n}\n\nexport { Badge, badgeVariants }\n"],"names":[],"mappings":";;;;;AACA;AAEA;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,0KACA;IACE,UAAU;QACR,SAAS;YACP,SACE;YACF,WACE;YACF,aACE;YACF,SAAS;QACX;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAOF,SAAS,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAmB;IACzD,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QAAa,GAAG,KAAK;;;;;;AAExE","debugId":null}},
    {"offset": {"line": 130, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 257, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/textarea.tsx"],"sourcesContent":["import * as React from 'react';\n\nimport {cn} from '@/lib/utils';\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, React.ComponentProps<'textarea'>>(\n  ({className, ...props}, ref) => {\n    return (\n      <textarea\n        className={cn(\n          'flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm',\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    );\n  }\n);\nTextarea.displayName = 'Textarea';\n\nexport {Textarea};\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,yBAAW,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC9B,CAAC,EAAC,SAAS,EAAE,GAAG,OAAM,EAAE;IACtB,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,qTACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,SAAS,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 285, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 317, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/minecraft/BuildingCard.tsx"],"sourcesContent":["\n'use client';\n\nimport Image from 'next/image';\nimport { useRouter } from 'next/navigation';\nimport type { Building, User, BuildingStatus, Competition } from '@/types';\nimport { Card, CardContent, CardFooter, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { AlertDialog, AlertDialogAction, AlertDialogCancel, AlertDialogContent, AlertDialogDescription, AlertDialogFooter, AlertDialogHeader, AlertDialogTitle, AlertDialogTrigger } from '@/components/ui/alert-dialog';\nimport { Textarea } from '@/components/ui/textarea';\nimport { Label } from '@/components/ui/label';\nimport { ShieldAlert, CalendarDays, Users, Ticket, ArrowRight, Eye, Flag, Loader2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { format, parseISO } from 'date-fns';\nimport { useToast } from '@/hooks/use-toast';\nimport { useState, useTransition } from 'react';\nimport { reportBuildingAction } from '@/app/actions';\n\ninterface BuildingCardProps {\n  building: Building;\n  competition?: Competition;\n  currentUser: User | null;\n}\n\nconst getStatusBadgeClass = (status?: BuildingStatus | Competition['status']) => {\n  if (!status) return 'bg-muted text-muted-foreground';\n  switch (status) {\n    case '有效':\n    case '已结束':\n      return 'bg-green-500/20 text-green-400 border-green-500/30';\n    case '等待审核':\n      return 'bg-yellow-500/20 text-yellow-400 border-yellow-500/30';\n    case '审查中-被举报':\n      return 'bg-orange-500/20 text-orange-400 border-orange-500/30';\n    case '进行中': \n    case '评审中': \n      return 'bg-blue-500/20 text-blue-400 border-blue-500/30';\n    case '策划中': \n      return 'bg-purple-500/20 text-purple-400 border-purple-500/30';\n    case '违规':\n    case '作弊':\n    case '无效':\n    case '已归档':\n      return 'bg-red-500/20 text-red-400 border-red-500/30';\n    default:\n      return 'bg-muted text-muted-foreground';\n  }\n};\n\n\nexport default function BuildingCard({ building, competition, currentUser }: BuildingCardProps) {\n  const { toast } = useToast();\n  const router = useRouter();\n  const [isReporting, startReportTransition] = useTransition();\n  const [isReportDialogOpen, setIsReportDialogOpen] = useState(false);\n  const [reportReason, setReportReason] = useState('');\n\n  const displayStatus = competition ? competition.status : building.status;\n  const isViewable = competition ? true : building.status === '有效';\n  const cardTitle = competition ? competition.name : building.name;\n  const cardDescription = competition ? competition.description : building.description;\n  const targetHref = competition ? `/history/competition/${competition.id}` : `/building/${building.id}`;\n  const buttonText = competition ? \"查看活动\" : \"查看作品\";\n\n  let formattedDate = '日期未知';\n  if (competition) {\n    if (competition.startDate && competition.endDate) {\n      try {\n          formattedDate = `${format(parseISO(competition.startDate), 'MM/dd')} - ${format(parseISO(competition.endDate), 'MM/dd')}, ${competition.year}`;\n      } catch (e) { console.error(\"Date formatting error for competition\", e); formattedDate = `${competition.year}年`;}\n    } else {\n      formattedDate = `${competition.year}年`;\n    }\n  } else if (building.submissionDate) {\n    try {\n      formattedDate = format(new Date(building.submissionDate), 'yyyy年MM月dd日');\n    } catch (e) { console.error(\"Date formatting error for building submission date\", e); }\n  } else if (building.eventYear) { \n     formattedDate = `${building.eventYear}年活动`;\n  }\n  \n  const imageUrl = building.imageUrl || 'https://placehold.co/600x338.png';\n  const aiHint = building.aiHint || (competition ? \"event banner\" : \"minecraft architecture\");\n\n  const handleCardClick = () => {\n    if (isViewable) {\n      router.push(targetHref);\n    } else if (!competition && building.status !== '有效') {\n      toast({\n        title: '访问受限',\n        description: `此作品（状态：${building.status}）当前不可访问，请稍后再试。`,\n        variant: 'default',\n      });\n    }\n  };\n\n  const handleReportSubmit = async () => {\n    if (!currentUser) {\n      toast({ title: \"请先登录\", description: \"登录后才能举报作品。\", variant: \"default\" });\n      setIsReportDialogOpen(false);\n      return;\n    }\n    if (reportReason.trim().length < 10) {\n      toast({ title: \"举报失败\", description: \"举报原因至少需要10个字符。\", variant: \"destructive\" });\n      return;\n    }\n\n    startReportTransition(async () => {\n      const result = await reportBuildingAction(building.id, reportReason);\n      if (result.success) {\n        toast({ title: \"举报成功\", description: result.message });\n      } else {\n        toast({ title: \"举报失败\", description: result.message, variant: \"destructive\" });\n      }\n      setIsReportDialogOpen(false);\n      setReportReason(''); // Clear reason after submission\n    });\n  };\n  \n  const canReport = currentUser && !competition && building.status === '有效';\n\n  return (\n    <Card \n      onClick={handleCardClick}\n      className={cn(\n        \"bg-card border-border overflow-hidden shadow-lg hover:shadow-primary/20 transition-all duration-300 flex flex-col h-full group relative\",\n        isViewable ? 'cursor-pointer' : 'cursor-not-allowed opacity-80'\n      )}\n      tabIndex={0} \n      onKeyDown={(e) => { if (e.key === 'Enter' || e.key === ' ') handleCardClick(); }}\n      role=\"button\"\n      aria-label={`${buttonText} ${cardTitle}`}\n    >\n      <div className=\"relative aspect-[16/9] w-full overflow-hidden\">\n        <Image\n          src={imageUrl.replace('800x600', '600x338').replace('600x400', '600x338')}\n          alt={cardTitle}\n          fill \n          sizes=\"(max-width: 640px) 100vw, (max-width: 1024px) 50vw, 33vw\" \n          className={cn(\n            \"object-cover transform transition-transform duration-300\", \n            isViewable && \"group-hover:scale-105\"\n          )}\n          data-ai-hint={aiHint}\n        />\n        <Badge className={cn(\n            \"absolute top-3 right-3 px-2 py-1 text-xs font-semibold rounded-md shadow-md\", \n            getStatusBadgeClass(displayStatus)\n          )}>\n          {displayStatus}\n        </Badge>\n        {!isViewable && !competition && (\n          <div className=\"absolute inset-0 bg-destructive/30 backdrop-blur-sm flex flex-col items-center justify-center text-center p-4 z-10\">\n            <ShieldAlert className=\"h-10 w-10 text-destructive-foreground mb-2\" />\n            <p className=\"text-md font-semibold text-destructive-foreground\">状态: {building.status}</p>\n            <p className=\"text-xs text-destructive-foreground/80\">此作品当前不可交互。</p>\n          </div>\n        )}\n      </div>\n      <CardHeader className=\"pt-4 pb-2 flex-shrink-0\">\n        <CardTitle className={cn(\n          \"text-lg font-semibold text-card-foreground leading-tight truncate\", \n          isViewable && \"group-hover:text-primary transition-colors\"\n        )}>\n          {cardTitle}\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"flex-grow pt-1 pb-3 space-y-2 text-sm\">\n        <div className=\"flex items-center text-muted-foreground gap-1.5\">\n          <CalendarDays size={14} /> \n          <span>{formattedDate}</span>\n        </div>\n        {cardDescription && <p className=\"text-muted-foreground leading-relaxed line-clamp-2\">{cardDescription}</p>}\n      </CardContent>\n      <CardFooter className=\"flex justify-between items-center mt-auto pt-3 pb-4 px-4 border-t border-border/50 flex-shrink-0\">\n        <div className=\"flex items-center gap-3 text-xs text-muted-foreground\">\n          {!competition && (\n            <>\n              <div className=\"flex items-center gap-1\">\n                <Users size={14} />\n                <span>{building.votes} 票</span>\n              </div>\n              <div className=\"flex items-center gap-1\">\n                <Ticket size={14} />\n                <span>ID: {building.id.substring(0,6).toUpperCase()}</span>\n              </div>\n            </>\n          )}\n          {competition && <span className=\"text-xs text-muted-foreground\">活动代码: {competition.id.substring(0,6).toUpperCase()}</span>}\n        </div>\n        \n        <div className=\"flex items-center gap-1\">\n            {canReport && (\n              <AlertDialog open={isReportDialogOpen} onOpenChange={setIsReportDialogOpen}>\n                <AlertDialogTrigger asChild>\n                  <Button\n                      size=\"sm\"\n                      variant=\"ghost\"\n                      className=\"px-2 py-1 h-auto text-xs text-destructive hover:bg-destructive/10 hover:text-destructive\"\n                      onClick={(e) => { e.stopPropagation(); setIsReportDialogOpen(true); }}\n                      aria-label={`举报作品 ${building.name}`}\n                  >\n                      <Flag size={14} />\n                      <span className=\"ml-1 hidden sm:inline\">举报</span>\n                  </Button>\n                </AlertDialogTrigger>\n                <AlertDialogContent onClick={(e) => e.stopPropagation()}>\n                  <AlertDialogHeader>\n                    <AlertDialogTitle>举报作品: {building.name}</AlertDialogTitle>\n                    <AlertDialogDescription>\n                      请详细说明您的举报原因，这将有助于管理员审核。原因至少需要10个字符。\n                    </AlertDialogDescription>\n                  </AlertDialogHeader>\n                  <div className=\"space-y-2 py-2\">\n                    <Label htmlFor=\"reportReasonTextarea\" className=\"text-sm font-medium\">举报原因</Label>\n                    <Textarea\n                      id=\"reportReasonTextarea\"\n                      placeholder=\"请在此处输入详细的举报理由...\"\n                      value={reportReason}\n                      onChange={(e) => setReportReason(e.target.value)}\n                      rows={4}\n                      className=\"text-sm\"\n                    />\n                    {reportReason.trim().length > 0 && reportReason.trim().length < 10 && (\n                        <p className=\"text-xs text-destructive\">举报原因至少需要10个字符。</p>\n                    )}\n                  </div>\n                  <AlertDialogFooter>\n                    <AlertDialogCancel onClick={() => {setReportReason(''); setIsReportDialogOpen(false);}}>取消</AlertDialogCancel>\n                    <AlertDialogAction \n                      onClick={handleReportSubmit} \n                      disabled={isReporting || reportReason.trim().length < 10}\n                      className={cn(isReporting && \"opacity-50 cursor-not-allowed\")}\n                    >\n                      {isReporting ? <Loader2 size={16} className=\"animate-spin mr-2\" /> : null}\n                      提交举报\n                    </AlertDialogAction>\n                  </AlertDialogFooter>\n                </AlertDialogContent>\n              </AlertDialog>\n            )}\n            <Button \n              size=\"sm\" \n              variant=\"ghost\" \n              className={cn(\n                \"px-2 py-1 h-auto text-sm\",\n                isViewable ? \"text-primary hover:bg-primary/10 hover:text-primary\" : \"text-muted-foreground cursor-not-allowed\"\n              )}\n              disabled={!isViewable}\n              aria-hidden=\"true\" \n              tabIndex={-1} \n            >\n              {isViewable ? buttonText : '无法查看'}\n              {isViewable && <ArrowRight size={16} className=\"ml-1\" />}\n            </Button>\n        </div>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 883, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 947, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["\n'use client';\n\nimport { useEffect, useState } from 'react';\nimport type { User, Building, Competition } from '@/types';\nimport { getCompetitions, getActiveWorks, fetchUserSessionForClient } from '@/app/actions';\nimport BuildingCard from '@/components/minecraft/BuildingCard';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { ServerCrash, Inbox, Loader2 } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { Card, CardContent } from '@/components/ui/card'; // Keep Card and CardContent for skeleton\n\nexport default function HomePage() {\n  const [competitions, setCompetitions] = useState<Competition[]>([]);\n  const [activeWorks, setActiveWorks] = useState<Building[]>([]);\n  const [currentUser, setCurrentUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function fetchData() {\n      setLoading(true);\n      setError(null);\n      try {\n        // For homepage, we decided to show competitions as cards\n        const [competitionsData, activeWorksData, userData] = await Promise.all([\n          getCompetitions().catch(e => { console.error(\"Failed to fetch competitions\", e); return []; }),\n          getActiveWorks().catch(e => { console.error(\"Failed to fetch active works\", e); return []; }),\n          fetchUserSessionForClient().catch(e => { console.error(\"Failed to fetch user session\", e); return null; })\n        ]);\n        setCompetitions(competitionsData);\n        setActiveWorks(activeWorksData); // We might use this for a \"featured active works\" section later\n        setCurrentUser(userData);\n      } catch (err) {\n        console.error(\"Error fetching homepage data:\", err);\n        setError(\"无法加载数据，请稍后再试。\");\n      } finally {\n        setLoading(false);\n      }\n    }\n    fetchData();\n  }, []);\n\n  if (error) {\n    return (\n      <div className=\"py-8 px-4\">\n        <Alert variant=\"destructive\" className=\"mt-6 max-w-2xl mx-auto\">\n          <ServerCrash className=\"h-5 w-5\" />\n          <AlertTitle>数据加载错误</AlertTitle>\n          <AlertDescription>{error}</AlertDescription>\n        </Alert>\n      </div>\n    );\n  }\n  \n  if (loading) {\n    return (\n      <div className=\"space-y-6\">\n        <h2 className=\"text-2xl font-semibold text-foreground tracking-tight\">所有活动</h2>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n          {[...Array(4)].map((_, i) => (\n            <Card key={i} className=\"bg-card border-border shadow-md flex flex-col overflow-hidden\">\n              <Skeleton className=\"w-full aspect-[16/9]\" />\n              <CardContent className=\"p-4 flex flex-col flex-grow space-y-2\">\n                <Skeleton className=\"h-5 w-3/4\" />\n                <Skeleton className=\"h-3 w-1/2\" />\n                <Skeleton className=\"h-3 w-full\" />\n                <Skeleton className=\"h-3 w-2/3\" />\n                <div className=\"mt-auto flex justify-between items-center pt-2\">\n                  <div className=\"flex gap-3\">\n                    <Skeleton className=\"h-4 w-12\" />\n                    <Skeleton className=\"h-4 w-10\" />\n                  </div>\n                  <Skeleton className=\"h-8 w-24\" />\n                </div>\n              </CardContent>\n            </Card>\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <h2 className=\"text-2xl font-semibold text-foreground tracking-tight\">\n        所有活动\n      </h2>\n      \n      {competitions.length > 0 ? (\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-6\">\n          {competitions.map((competition) => (\n            <BuildingCard \n              key={competition.id}\n              // BuildingCard now expects a 'building' prop for its core structure,\n              // or a 'competition' prop to display competition info.\n              // We create a minimal 'building-like' structure from competition for display consistency.\n              building={{\n                id: competition.id, // Use competition id for key\n                name: competition.name,\n                description: competition.description || '',\n                imageUrl: `https://placehold.co/600x338.png?text=${encodeURIComponent(competition.name)}`, // Placeholder image\n                aiHint: \"event banner\",\n                status: '有效', // Competitions themselves don't have this building status, but card expects it\n                author: \"活动主办方\", // Placeholder\n                votes: 0, // Placeholder\n                size: '中型', // Placeholder\n                territoryIdentifier: '', server: '', coordinates: {x:0,y:0,z:0}, // Placeholders\n                eventEdition: competition.year,\n                eventYear: competition.year,\n                competitionId: competition.id, // Link back to competition\n              }}\n              competition={competition} // Pass the full competition object for specific competition details\n              currentUser={currentUser}\n            />\n          ))}\n        </div>\n      ) : (\n         <Alert className=\"border-primary/30 bg-primary/5 text-center py-10\">\n            <Inbox className=\"h-12 w-12 text-primary mx-auto mb-4\" />\n            <AlertTitle className=\"text-xl font-semibold text-primary/90 mb-2\">\n                暂无活动\n            </AlertTitle>\n            <AlertDescription className=\"text-primary/80\">\n                目前还没有任何活动记录。敬请期待！\n            </AlertDescription>\n        </Alert>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}